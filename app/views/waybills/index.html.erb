<div id="filter-area" class="filter-area">
  <label><%=t 'views.waybills.created_at' %></label>
  <input type="text" id="filter_created_at" data-bind="value: filter.created"/>
  <label><%=t 'views.waybills.document_id' %></label>
  <input type="text" id="filter_document_id" data-bind="value: filter.document_id"/>
  <label><%=t 'views.waybills.distributor' %></label>
  <input type="text" id="filter_distributor" data-bind="value: filter.distributor"/>
  <label><%=t 'views.waybills.storekeeper' %></label>
  <input type="text" id="filter_storekeeper" data-bind="value: filter.storekeeper"/>
  <label><%=t 'views.waybills.storekeeper_place' %></label>
  <input type="text" id="filter_storekeeper_place" data-bind="value: filter.storekeeper_place"/>
  <label><%=t 'views.statable.state' %></label>
  <select id="filter_state" data-bind="value: filter.state">
    <option value=""></option>
    <option value="1"><%=t 'views.statable.inwork' %></option>
    <option value="2"><%=t 'views.statable.canceled' %></option>
    <option value="3"><%=t 'views.statable.applied' %></option>
  </select>
  <label><%=t 'views.waybills.resource.name' %></label>
  <input type="text" id="filter_resource_name" data-bind="value: filter.resource_name"/>
  <input type="button" value="<%=t 'views.home.search' %>"
         data-bind="click: filterData"/>
</div>

<table>
  <thead>
    <tr>
      <th></th>
      <th id="created" data-bind="click: sortBy">
        <%=t 'views.waybills.created_at' %><span></span>
      </th>
      <th id="document_id" data-bind="click: sortBy">
        <%=t 'views.waybills.document_id' %><span></span>
      </th>
      <th id="distributor" data-bind="click: sortBy">
        <%=t 'views.waybills.distributor' %><span></span>
      </th>
      <th id="storekeeper" data-bind="click: sortBy">
        <%=t 'views.waybills.storekeeper' %><span></span>
      </th>
      <th id="storekeeper_place" data-bind="click: sortBy">
        <%=t 'views.waybills.storekeeper_place' %><span></span>
      </th>
      <th id="state" data-bind="click: sortBy">
        <%=t 'views.statable.state' %><span></span>
      </th>
    </tr>
  </thead>
  <tbody data-bind="foreach: documents">
    <tr>
      <td class="tree-actions-by-wb" data-bind="click: $parent.expandTree">
        <div class="ui-corner-all ui-state-hover">
          <span class="ui-icon ui-icon-circle-plus"></span>
        </div>
      </td>
      <td data-bind="text: created, click: $parent.show"></td>
      <td data-bind="text: document_id, click: $parent.show"></td>
      <td data-bind="text: distributor, click: $parent.show"></td>
      <td data-bind="text: storekeeper, click: $parent.show"></td>
      <td data-bind="text: storekeeper_place, click: $parent.show"></td>
      <td data-bind="text: state, click: $parent.show"></td>
    </tr>
    <tr data-bind="attr: {id: 'resource_' + id}, with: subitems">
      <td></td>
      <td colspan="6" class="td-inner-table">
        <div class="paginate">
          <span data-bind="text: range"></span> <%= t('views.home.of') %>
          <span data-bind="text: count"></span>
          <input type="button" value="<" data-bind="click: prev, disable: page() < 2"/>
          <input type="button" class="paginate-right" value=">"
                 data-bind="click: next, disable: page()*per_page() >= count()"/>
        </div>
        <table class="inner-table">
          <thead>
            <tr>
              <th><%=t 'views.waybills.resource.tag' %></th>
              <th><%=t 'views.waybills.resource.mu' %></th>
              <th><%=t 'views.waybills.resource.amount' %></th>
              <th><%=t 'views.waybills.resource.price' %></th>
              <th><%=t 'views.waybills.resource.sum' %></th>
            </tr>
          </thead>
          <tbody data-bind="foreach: documents">
            <tr>
              <td data-bind="text: tag"></td>
              <td data-bind="text: mu"></td>
              <td data-bind="text: amount"></td>
              <td data-bind="text: price"></td>
              <td data-bind="text: sum"></td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </tbody>
</table>
