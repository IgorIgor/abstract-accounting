
<div class='actions'>
  <% if current_user.root? || current_user.managed_group %>
    <select id="warehouse_filter" size="1"
            data-bind="options: warehouses, optionsText: 'tag', optionsValue: 'place_id',
                       optionsCaption: '<%= t 'views.warehouses.filter.select.warehouse' %>',
                       value: warehouse_id, event: {change: assignForemen}">
    </select>
  <% end %>
  <label for="foremen_filter_from">
    <%= t 'views.warehouses.foremen.report.dates.from' %>:
  </label>
  <input type="text" id="foremen_filter_from" style="width: 80px;"
         data-bind="datepicker: from, event: {change: filterData}">
  <label for="foremen_filter_to">
    <%= t 'views.warehouses.foremen.report.dates.to' %>:
  </label>
  <input type="text" id="foremen_filter_to" style="width: 80px;"
         data-bind="datepicker: to, event: {change: filterData}">
  <div class='buttons-separator'></div>
  <input type='button' value="<%= t('views.warehouses.report.print_all') %>"
         data-bind='click: function() { print(true); }, visible: foremen().length != 0'/>
  <div class='buttons-separator'></div>
  <input type='button' value="<%= t('views.warehouses.report.print') %>"
         data-bind='click: function() { print(false); }, visible: documents().length > 0'/>
</div>
<!-- ko if: foremen().length != 0 -->
<div id="foremen_tabs" data-bind="jqTabs: { current: 0, headers: foremen,
                                            tabSelect: filterData },
                                  value: foreman_id">
  <div>
    <ul id="head">
    </ul>
  </div>
</div>
<!-- /ko -->

<table>
  <thead>
    <tr>
      <th></th>
      <th><%=t 'views.warehouses.foremen.report.resource.name' %></th>
      <th><%=t 'views.warehouses.foremen.report.resource.mu' %></th>
      <th><%=t 'views.warehouses.foremen.report.amount' %></th>
      <th><%=t 'views.warehouses.foremen.report.price' %></th>
      <th><%=t 'views.warehouses.foremen.report.sum' %></th>
    </tr>
  </thead>
  <tbody data-bind="foreach: documents">
    <tr>
      <td><input type="checkbox" data-bind="value: id, checked: $root.resources[$root.foreman_id()]" /></td>
      <td data-bind="text: tag"></td>
      <td data-bind="text: mu"></td>
      <td data-bind="text: amount"></td>
      <td data-bind="text: price"></td>
      <td data-bind="text: sum"></td>
    </tr>
  </tbody>
</table>
